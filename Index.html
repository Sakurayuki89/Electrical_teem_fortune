<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>오늘의 운세 - 전기정비팀</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef } = React;

        // 아이콘 컴포넌트들
        const Star = ({ className = "w-4 h-4" }) => (
            <svg className={className} fill="currentColor" viewBox="0 0 20 20">
                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
            </svg>
        );

        const Calendar = ({ className = "w-4 h-4" }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>
        );

        const Shield = ({ className = "w-4 h-4" }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
            </svg>
        );

        const Heart = ({ className = "w-4 h-4" }) => (
            <svg className={className} fill="currentColor" viewBox="0 0 20 20">
                <path fillRule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clipRule="evenodd" />
            </svg>
        );

        const Sparkles = ({ className = "w-4 h-4" }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
            </svg>
        );

        const MBTIFortuneApp = () => {
            const [mbti, setMbti] = useState('');
            const [birthYear, setBirthYear] = useState('');
            const [birthMonth, setBirthMonth] = useState('');
            const [birthDay, setBirthDay] = useState('');
            const [result, setResult] = useState(null);
            const [loading, setLoading] = useState(false);

            const monthRef = useRef(null);
            const dayRef = useRef(null);

            const mbtiTypes = [
                'INTJ', 'INTP', 'ENTJ', 'ENTP',
                'INFJ', 'INFP', 'ENFJ', 'ENFP',
                'ISTJ', 'ISFJ', 'ESTJ', 'ESFJ',
                'ISTP', 'ISFP', 'ESTP', 'ESFP'
            ];

            const electricalSafetyAdvices = {
                'INTJ': '고압 판넬 작업 시 감전 위험이 있습니다. 절연장갑과 절연화를 착용하고 접지 확인을 철저히 하세요. 모터 정비 전 반드시 전원 차단 후 록아웃을 실시하세요.',
                'INTP': '센서 교체 작업 중 미세 전류로 인한 화상 위험이 예상됩니다. 멀티미터로 전압을 확인하고 정전기 방지 조치를 취하세요. 케이블 포설 시 기존 선로와의 간섭을 주의하세요.',
                'ENTJ': '분전반 정비 시 아크 플래시 위험이 높습니다. 팀원들과 안전거리를 유지하고 아크 방지 보호구를 착용하세요. 작업 전 전력 계통도를 확인하고 비상연락체계를 구축하세요.',
                'ENTP': '전기설비 개선 작업 중 단락 위험이 있습니다. 회로 분석을 정확히 하고 절연저항을 측정하세요. 새로운 케이블 포설 시 화재 등급을 확인하고 방화구획을 준수하세요.',
                'INFJ': '모터 베어링 교체 시 회전체 접촉 위험이 예상됩니다. 작업 전 완전 정지를 확인하고 안전태그를 부착하세요. 전기실 출입 시 가스농도를 측정하고 환기를 충분히 하세요.',
                'INFP': '조명 교체 작업 중 추락 및 감전 위험이 있습니다. 안전대를 착용하고 두 사람이 함께 작업하세요. 습한 환경에서의 전기작업 시 누전차단기를 반드시 설치하세요.',
                'ENFJ': '팀 작업 시 의사소통 오류로 인한 안전사고 위험이 예상됩니다. 작업지시서를 명확히 하고 상호 안전점검을 실시하세요. 고압 케이블 작업 시 안전거리 확보와 경고표지 설치가 필수입니다.',
                'ENFP': '다양한 전기설비 점검 중 누전 위험이 있습니다. 절연저항 측정을 주기적으로 하고 접지선 상태를 점검하세요. 밀폐된 전기실 작업 시 산소농도를 확인하고 강제환기를 실시하세요.',
                'ISTJ': '정기점검 중 노후 케이블로 인한 화재 위험이 예상됩니다. 열화상카메라로 과열부위를 점검하고 절연피복 상태를 면밀히 확인하세요. 접지 저항값을 정기적으로 측정하고 기록하세요.',
                'ISFJ': '센서 보정 작업 중 정밀기기 손상 위험이 있습니다. 정전기 방지매트를 사용하고 장비 접지를 확인하세요. 야간 정비작업 시 충분한 조명을 확보하고 2인 1조로 작업하세요.',
                'ESTJ': '대용량 모터 교체 시 크레인 작업과 감전 복합 위험이 예상됩니다. 중량물 취급계획을 수립하고 전력 차단을 이중으로 확인하세요. 작업구역 출입통제와 안전표지 설치를 철저히 하세요.',
                'ESFJ': '전기실 청소 및 정비 시 분진과 감전 위험이 있습니다. 방진마스크를 착용하고 습식청소를 금지하세요. 동료와 함께 작업하며 서로의 안전상태를 지속적으로 확인하세요.',
                'ISTP': '배전반 내부 정비 시 충전부 접촉 위험이 예상됩니다. 절연공구를 사용하고 한 손 작업 원칙을 준수하세요. 케이블 인입 작업 시 날카로운 모서리로 인한 피복 손상을 방지하세요.',
                'ISFP': '조명등 안정기 교체 시 수은 노출 위험이 있습니다. 보호장갑을 착용하고 폐기물을 안전하게 처리하세요. 단독 작업 시 비상연락 수단을 확보하고 정해진 시간마다 연락하세요.',
                'ESTP': '긴급 복구작업 중 서두름으로 인한 감전 위험이 예상됩니다. 아무리 급해도 안전절차를 생략하지 말고 보호구를 완전히 착용하세요. 임시전력 공급 시 과부하와 접지를 반드시 확인하세요.',
                'ESFP': '여러 설비를 동시에 정비하며 실수로 인한 위험이 있습니다. 작업순서를 명확히 하고 각 단계별로 안전점검을 실시하세요. 전기작업 완료 후 절연저항과 접지저항을 측정하여 안전을 확인하세요.'
            };

            const personalFortunes = {
                'INTJ': '계획한 일들이 차근차근 진행되는 날입니다. 새로운 아이디어가 떠오르면 메모해두세요. 오후에 중요한 연락이 올 수 있으니 전화를 놓치지 마세요.',
                'INTP': '호기심이 강해지는 하루입니다. 평소 관심 있던 분야에 대해 깊이 탐구해보세요. 혼자만의 시간을 가지며 사색하는 것이 도움이 될 것입니다.',
                'ENTJ': '리더십을 발휘할 기회가 찾아옵니다. 주변 사람들의 의견을 적극적으로 들어보세요. 저녁에는 가족과 함께하는 시간을 가져보는 것이 좋겠습니다.',
                'ENTP': '창의적인 에너지가 넘치는 날입니다. 새로운 도전을 두려워하지 마세요. 예상치 못한 기회가 찾아올 수 있으니 열린 마음으로 받아들이세요.',
                'INFJ': '직감이 예리해지는 하루입니다. 내면의 목소리에 귀 기울여보세요. 가까운 사람과의 깊은 대화가 큰 위로가 될 것입니다.',
                'INFP': '감성이 풍부해지는 날입니다. 예술 활동이나 자연 속 산책이 마음의 평화를 가져다줄 것입니다. 새로운 관계에서 좋은 인연을 만날 수 있습니다.',
                'ENFJ': '타인을 돕고 싶은 마음이 강해지는 날입니다. 작은 친절이 큰 기쁨을 가져다줄 것입니다. 건강관리에 신경 쓰며 충분한 휴식을 취하세요.',
                'ENFP': '사교적인 에너지가 넘치는 하루입니다. 다양한 사람들과의 만남이 즐거울 것입니다. 새로운 취미나 관심사를 찾아보는 것도 좋겠습니다.',
                'ISTJ': '안정적이고 평온한 하루가 될 것입니다. 계획했던 일들을 차례대로 처리하며 성취감을 느끼세요. 규칙적인 생활패턴이 건강에 도움이 됩니다.',
                'ISFJ': '따뜻한 마음으로 하루를 시작하세요. 주변 사람들의 작은 부탁을 들어주는 것이 행운을 가져다줄 것입니다. 맛있는 음식으로 기분전환을 해보세요.',
                'ESTJ': '목표 달성을 위한 계획을 세우기 좋은 날입니다. 체계적으로 일을 진행하면 좋은 결과를 얻을 수 있습니다. 운동으로 스트레스를 해소하세요.',
                'ESFJ': '주변 사람들과의 화합이 중요한 날입니다. 소통과 배려로 더욱 돈독한 관계를 만들어가세요. 가족 모임이나 친구들과의 만남이 즐거울 것입니다.',
                'ISTP': '실용적인 문제 해결에 집중하기 좋은 날입니다. 손으로 무언가를 만들거나 수리하는 일이 만족감을 줄 것입니다. 여유로운 마음으로 하루를 보내세요.',
                'ISFP': '예술적 감각이 뛰어난 하루입니다. 아름다운 것들을 감상하며 마음의 여유를 찾으세요. 자신만의 시간을 가지며 내면을 돌아보는 것이 도움이 됩니다.',
                'ESTP': '활동적이고 역동적인 에너지가 넘치는 날입니다. 새로운 경험을 추구하며 즐거운 하루를 보내세요. 운동이나 야외활동이 특히 좋을 것입니다.',
                'ESFP': '밝고 긍정적인 에너지로 주변을 밝게 만드는 날입니다. 친구들과 함께하는 시간이 특별히 즐거울 것입니다. 새로운 사람과의 만남에서 좋은 인상을 남길 수 있습니다.'
            };

            const generateLuckyNumbers = (mbtiType, year, month, day) => {
                const mbtiValue = mbtiType.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0);
                const fullYear = parseInt(year) <= 25 ? 2000 + parseInt(year) : 1900 + parseInt(year);
                const dateValue = new Date(fullYear, parseInt(month) - 1, parseInt(day)).getTime();
                const today = new Date().getDate();
                
                const seed = (mbtiValue + dateValue + today) % 1000000;
                
                let available = [];
                for (let i = 1; i <= 45; i++) {
                    available.push(i);
                }
                
                let current = seed;
                let selected = [];
                
                for (let i = 0; i < 6; i++) {
                    current = (current * 1103515245 + 12345) % Math.pow(2, 31);
                    const index = Math.floor((current % 1000000) / 1000000 * available.length);
                    selected.push(available[index]);
                    available.splice(index, 1);
                }
                
                return selected.sort((a, b) => a - b);
            };

            const handleYearChange = (e) => {
                const value = e.target.value.replace(/\D/g, '').slice(0, 2);
                setBirthYear(value);
                if (value.length === 2) {
                    monthRef.current?.focus();
                }
            };

            const handleMonthChange = (e) => {
                const value = e.target.value.replace(/\D/g, '').slice(0, 2);
                setBirthMonth(value);
                if (value.length === 2) {
                    dayRef.current?.focus();
                }
            };

            const handleDayChange = (e) => {
                const value = e.target.value.replace(/\D/g, '').slice(0, 2);
                setBirthDay(value);
            };

            const handleSubmit = () => {
                if (!mbti || !birthYear || !birthMonth || !birthDay) {
                    alert('MBTI와 생년월일을 모두 입력해주세요!');
                    return;
                }

                const year = parseInt(birthYear);
                const month = parseInt(birthMonth);
                const day = parseInt(birthDay);

                if (month < 1 || month > 12) {
                    alert('월은 01~12 사이로 입력해주세요!');
                    return;
                }

                if (day < 1 || day > 31) {
                    alert('일은 01~31 사이로 입력해주세요!');
                    return;
                }

                setLoading(true);

                setTimeout(() => {
                    const todayDate = new Date().toLocaleDateString('ko-KR', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });

                    const personalFortune = personalFortunes[mbti];
                    const safetyAdvice = electricalSafetyAdvices[mbti];
                    const luckyNumbers = generateLuckyNumbers(mbti, birthYear, birthMonth, birthDay);

                    setResult({
                        date: todayDate,
                        mbti,
                        personalFortune,
                        safetyAdvice,
                        luckyNumbers
                    });

                    setLoading(false);
                }, 1000);
            };

            const reset = () => {
                setResult(null);
                setMbti('');
                setBirthYear('');
                setBirthMonth('');
                setBirthDay('');
                setLoading(false);
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-100 via-blue-50 to-indigo-100 p-4">
                    <div className="max-w-md mx-auto">
                        <div className="bg-white rounded-3xl shadow-2xl overflow-hidden">
                            <div className="bg-gradient-to-r from-purple-600 to-blue-600 text-white p-6 text-center">
                                <div className="flex items-center justify-center mb-2">
                                    <Star className="w-8 h-8 mr-2" />
                                    <h1 className="text-2xl font-bold">오늘의 운세</h1>
                                    <Star className="w-8 h-8 ml-2" />
                                </div>
                                <p className="text-purple-100">개인운세 & 전기정비 안전운세 & 행운번호</p>
                            </div>

                            {!result ? (
                                <div className="p-6 space-y-6">
                                    <div>
                                        <label className="block text-sm font-semibold text-gray-700 mb-2">
                                            <Heart className="w-4 h-4 inline mr-1" />
                                            MBTI 유형을 선택하세요
                                        </label>
                                        <select
                                            value={mbti}
                                            onChange={(e) => setMbti(e.target.value)}
                                            className="w-full p-3 border-2 border-purple-200 rounded-xl focus:border-purple-500 focus:outline-none transition-colors"
                                        >
                                            <option value="">MBTI 선택</option>
                                            {mbtiTypes.map(type => (
                                                <option key={type} value={type}>{type}</option>
                                            ))}
                                        </select>
                                    </div>

                                    <div>
                                        <label className="block text-sm font-semibold text-gray-700 mb-2">
                                            <Calendar className="w-4 h-4 inline mr-1" />
                                            생년월일을 입력하세요 (년/월/일)
                                        </label>
                                        <div className="flex gap-2 items-center">
                                            <div className="flex-1">
                                                <input
                                                    type="text"
                                                    value={birthYear}
                                                    onChange={handleYearChange}
                                                    placeholder="년 (YY)"
                                                    maxLength="2"
                                                    className="w-full p-3 border-2 border-purple-200 rounded-xl focus:border-purple-500 focus:outline-none transition-colors text-center text-lg font-medium"
                                                />
                                                <p className="text-xs text-gray-500 text-center mt-1">년</p>
                                            </div>
                                            <span className="text-purple-400 font-bold text-xl">/</span>
                                            <div className="flex-1">
                                                <input
                                                    ref={monthRef}
                                                    type="text"
                                                    value={birthMonth}
                                                    onChange={handleMonthChange}
                                                    placeholder="월 (MM)"
                                                    maxLength="2"
                                                    className="w-full p-3 border-2 border-purple-200 rounded-xl focus:border-purple-500 focus:outline-none transition-colors text-center text-lg font-medium"
                                                />
                                                <p className="text-xs text-gray-500 text-center mt-1">월</p>
                                            </div>
                                            <span className="text-purple-400 font-bold text-xl">/</span>
                                            <div className="flex-1">
                                                <input
                                                    ref={dayRef}
                                                    type="text"
                                                    value={birthDay}
                                                    onChange={handleDayChange}
                                                    placeholder="일 (DD)"
                                                    maxLength="2"
                                                    className="w-full p-3 border-2 border-purple-200 rounded-xl focus:border-purple-500 focus:outline-none transition-colors text-center text-lg font-medium"
                                                />
                                                <p className="text-xs text-gray-500 text-center mt-1">일</p>
                                            </div>
                                        </div>
                                    </div>

                                    <button
                                        onClick={handleSubmit}
                                        disabled={loading}
                                        className={`w-full py-3 px-6 rounded-xl font-semibold transition-all duration-200 shadow-lg ${
                                            loading
                                                ? 'bg-gray-400 cursor-not-allowed'
                                                : 'bg-gradient-to-r from-purple-600 to-blue-600 text-white hover:from-purple-700 hover:to-blue-700 transform hover:scale-105'
                                        }`}
                                    >
                                        {loading ? (
                                            <div className="flex items-center justify-center">
                                                <div className="animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"></div>
                                                개인운세 & 안전운세 분석 중...
                                            </div>
                                        ) : (
                                            <>
                                                <Sparkles className="w-5 h-5 inline mr-2" />
                                                나의 운세 확인하기
                                            </>
                                        )}
                                    </button>
                                </div>
                            ) : (
                                <div className="p-6 space-y-6">
                                    <div className="text-center">
                                        <h2 className="text-lg font-semibold text-gray-800">{result.date}</h2>
                                        <div className="flex items-center justify-center gap-2">
                                            <span className="bg-purple-100 text-purple-700 px-3 py-1 rounded-full text-sm font-medium">
                                                {result.mbti} 유형
                                            </span>
                                        </div>
                                        <p className="text-gray-600 text-sm mt-2">오늘의 개인운세 & 전기정비 안전운세</p>
                                    </div>

                                    <div className="bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-xl border-l-4 border-blue-500">
                                        <div className="flex items-center mb-3">
                                            <Heart className="w-5 h-5 text-blue-600 mr-2" />
                                            <h3 className="font-semibold text-blue-800">오늘의 개인 운세</h3>
                                        </div>
                                        <p className="text-blue-700 leading-relaxed text-sm">{result.personalFortune}</p>
                                    </div>

                                    <div className="bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-xl border-l-4 border-green-500">
                                        <div className="flex items-center mb-3">
                                            <Shield className="w-5 h-5 text-green-600 mr-2" />
                                            <h3 className="font-semibold text-green-800">전기정비 안전 운세</h3>
                                        </div>
                                        <div className="max-h-32 overflow-y-auto">
                                            <p className="text-green-700 leading-relaxed text-sm">{result.safetyAdvice}</p>
                                        </div>
                                    </div>

                                    <div className="bg-gradient-to-r from-yellow-50 to-orange-50 p-4 rounded-xl border-l-4 border-yellow-500">
                                        <div className="flex items-center mb-3">
                                            <Star className="w-5 h-5 text-yellow-600 mr-2" />
                                            <h3 className="font-semibold text-yellow-800">오늘의 행운번호 (1-45)</h3>
                                        </div>
                                        <div className="text-center">
                                            <div className="flex justify-center gap-2 mb-2">
                                                {result.luckyNumbers.map((num, index) => (
                                                    <div key={index} className="w-12 h-12 bg-white rounded-full flex items-center justify-center shadow-lg border-2 border-yellow-300">
                                                        <span className="text-lg font-bold text-yellow-700">{num}</span>
                                                    </div>
                                                ))}
                                            </div>
                                            <p className="text-sm text-yellow-600 mt-2">이 번호들이 행운을 가져다 줄 거예요! ✨</p>
                                        </div>
                                    </div>

                                    <button
                                        onClick={reset}
                                        className="w-full bg-gray-500 text-white py-3 px-6 rounded-xl font-semibold hover:bg-gray-600 transition-colors"
                                    >
                                        다시 확인하기
                                    </button>
                                </div>
                            )}
                        </div>

                        <div className="text-center mt-6 text-gray-500 text-sm">
                            <p>✨ 오늘도 안전하고 행복한 하루 되세요! ✨</p>
                            <p className="text-xs mt-1">⚡ 전기정비팀을 위한 맞춤 운세</p>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<MBTIFortuneApp />, document.getElementById('root'));
    </script>
</body>
</html>